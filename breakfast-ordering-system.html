<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êó©È§êÂ∫óÈªûÈ§êÁ≥ªÁµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* È†ÇÈÉ®Â∞éËà™ */
        .header {
            background-color: #2c974b;
            color: white;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
        }

        /* Ê®ôÁ±§È†Å */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background-color: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tab {
            padding: 10px 20px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .tab.active {
            background-color: #2c974b;
            color: white;
        }

        /* ÂÖßÂÆπÂçÄÂüü */
        .content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* ËèúÂñÆÂçÄÂüü */
        .menu-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .category-btn {
            padding: 8px 16px;
            background-color: #e9ecef;
            border: 2px solid transparent;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .category-btn.active {
            background-color: #ff6b35;
            color: white;
            border-color: #ff6b35;
        }

        /* ËèúÂñÆÈ†ÖÁõÆ */
        .menu-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .menu-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .menu-item:hover {
            border-color: #ff6b35;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .menu-item h3 {
            font-size: 18px;
            margin-bottom: 8px;
            color: #333;
        }

        .menu-item .price {
            font-size: 20px;
            color: #ff6b35;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .add-btn {
            width: 100%;
            padding: 10px;
            background-color: #2c974b;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .add-btn:hover {
            background-color: #22753a;
        }

        /* Ë≥ºÁâ©Ëªä */
        .cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #ff6b35;
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: bold;
            z-index: 1000;
        }

        .cart-count {
            background-color: white;
            color: #ff6b35;
            padding: 2px 8px;
            border-radius: 15px;
            font-size: 14px;
        }

        /* Ë≥ºÁâ©ËªäË©≥ÊÉÖ */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
        }

        .cart-content {
            position: absolute;
            right: 0;
            top: 0;
            width: 400px;
            height: 100%;
            background-color: white;
            padding: 20px;
            overflow-y: auto;
        }

        @media (max-width: 768px) {
            .cart-content {
                width: 100%;
            }
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background-color: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:hover {
            background-color: #f0f0f0;
        }

        /* Áµ±Ë®àÂçÄÂüü */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e9ecef;
        }

        .stat-card h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
            color: #2c974b;
        }

        /* Â†±Ë°®ÂçÄÂüü */
        .report-section {
            margin-top: 30px;
        }

        .report-section h2 {
            margin-bottom: 20px;
            color: #333;
        }

        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .report-table th,
        .report-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .report-table th {
            background-color: #f8f9fa;
            font-weight: bold;
            color: #333;
        }

        .report-table tr:hover {
            background-color: #f8f9fa;
        }

        /* ÊåâÈàïÁµÑ */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: #2c974b;
            color: white;
        }

        .btn-primary:hover {
            background-color: #22753a;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        /* ÂãïÁï´ */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* GitHub ÂêåÊ≠•ÁãÄÊÖã */
        .sync-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 5px;
            background-color: #28a745;
            color: white;
            display: none;
            z-index: 3000;
        }

        .sync-status.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç≥ Êó©È§êÂ∫óÈªûÈ§êÁ≥ªÁµ±</h1>
            <div id="currentTime"></div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('order')">ÈªûÈ§ê</button>
            <button class="tab" onclick="showTab('stats')">‰ªäÊó•Áµ±Ë®à</button>
            <button class="tab" onclick="showTab('reports')">Â†±Ë°®</button>
            <button class="tab" onclick="showTab('settings')">Ë®≠ÂÆö</button>
        </div>

        <!-- ÈªûÈ§êÂçÄÂüü -->
        <div id="orderTab" class="content">
            <div class="menu-categories">
                <button class="category-btn active" onclick="showCategory('all')">ÂÖ®ÈÉ®</button>
                <button class="category-btn" onclick="showCategory('fried')">ÁÇ∏Áâ©ÂçÄ</button>
                <button class="category-btn" onclick="showCategory('egg')">ËõãÈ§ÖÂçÄ</button>
                <button class="category-btn" onclick="showCategory('bun')">È•ÖÈ†≠ÂçÄ</button>
                <button class="category-btn" onclick="showCategory('rice')">È£ØÁ≥∞ÂçÄ</button>
                <button class="category-btn" onclick="showCategory('drink')">È£≤ÊñôÂçÄ</button>
            </div>

            <div class="menu-items" id="menuItems"></div>
        </div>

        <!-- Áµ±Ë®àÂçÄÂüü -->
        <div id="statsTab" class="content" style="display: none;">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>‰ªäÊó•ÁáüÊ•≠È°ç</h3>
                    <div class="value" id="todayRevenue">NT$0</div>
                </div>
                <div class="stat-card">
                    <h3>Ë®ÇÂñÆÊï∏Èáè</h3>
                    <div class="value" id="orderCount">0</div>
                </div>
                <div class="stat-card">
                    <h3>Âπ≥ÂùáË®ÇÂñÆÈáëÈ°ç</h3>
                    <div class="value" id="avgOrder">NT$0</div>
                </div>
                <div class="stat-card">
                    <h3>ÁÜ±Èä∑ÂïÜÂìÅ</h3>
                    <div class="value" id="topItem">-</div>
                </div>
            </div>

            <div class="report-section">
                <h2>ÂêÑÈ°ûÂà•Èä∑ÂîÆÁµ±Ë®à</h2>
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>È°ûÂà•</th>
                            <th>Èä∑ÂîÆÊï∏Èáè</th>
                            <th>ÁáüÊ•≠È°ç</th>
                            <th>‰ΩîÊØî</th>
                        </tr>
                    </thead>
                    <tbody id="categoryStats"></tbody>
                </table>
            </div>

            <div class="report-section">
                <h2>ÁÜ±Èä∑ÂïÜÂìÅÊéíË°å</h2>
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>ÊéíÂêç</th>
                            <th>ÂïÜÂìÅÂêçÁ®±</th>
                            <th>Èä∑ÂîÆÊï∏Èáè</th>
                            <th>ÁáüÊ•≠È°ç</th>
                        </tr>
                    </thead>
                    <tbody id="topItems"></tbody>
                </table>
            </div>

            <div class="report-section">
                <h2>ÂÆ¢Êà∂Ê∂àË≤ªÁµ±Ë®à</h2>
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>ÂÆ¢Êà∂ÂßìÂêç</th>
                            <th>Ë®ÇÂñÆÊï∏</th>
                            <th>Ê∂àË≤ªÈáëÈ°ç</th>
                            <th>Âπ≥ÂùáÊ∂àË≤ª</th>
                        </tr>
                    </thead>
                    <tbody id="customerStats"></tbody>
                </table>
            </div>
        </div>

        <!-- Â†±Ë°®ÂçÄÂüü -->
        <div id="reportsTab" class="content" style="display: none;">
            <h2>Èä∑ÂîÆÂ†±Ë°®</h2>
            <div class="button-group">
                <button class="btn btn-primary" onclick="generateDailyReport()">Êó•Â†±Ë°®</button>
                <button class="btn btn-primary" onclick="generateWeeklyReport()">ÈÄ±Â†±Ë°®</button>
                <button class="btn btn-primary" onclick="generateMonthlyReport()">ÊúàÂ†±Ë°®</button>
                <button class="btn btn-secondary" onclick="exportToCSV()">ÂåØÂá∫CSV</button>
                <button class="btn btn-secondary" onclick="syncToGitHub()">ÂêåÊ≠•Âà∞GitHub</button>
            </div>
            
            <div id="reportContent" style="margin-top: 30px;"></div>
        </div>

        <!-- Ë®≠ÂÆöÂçÄÂüü -->
        <div id="settingsTab" class="content" style="display: none;">
            <h2>Á≥ªÁµ±Ë®≠ÂÆö</h2>
            <div style="margin-bottom: 20px;">
                <h3>GitHub Ë®≠ÂÆö</h3>
                <p style="margin-bottom: 10px;">Ë®≠ÂÆö GitHub ÂÑ≤Â≠òÂ∫´‰æÜ‰øùÂ≠òÈä∑ÂîÆÊï∏Êìö</p>
                <input type="text" id="githubToken" placeholder="GitHub Token" style="width: 100%; padding: 10px; margin-bottom: 10px;">
                <input type="text" id="githubRepo" placeholder="ÂÑ≤Â≠òÂ∫´ÂêçÁ®± (‰æãÂ¶Ç: username/repo)" style="width: 100%; padding: 10px; margin-bottom: 10px;">
                <button class="btn btn-primary" onclick="saveGitHubSettings()">ÂÑ≤Â≠òË®≠ÂÆö</button>
            </div>
            
            <div style="margin-top: 30px;">
                <h3>Ë≥áÊñôÁÆ°ÁêÜ</h3>
                <button class="btn btn-secondary" onclick="downloadBackup()">‰∏ãËºâÂÇô‰ªΩ</button>
                <button class="btn btn-secondary" onclick="clearLocalData()">Ê∏ÖÈô§Êú¨Âú∞Ë≥áÊñô</button>
            </div>
        </div>
    </div>

    <!-- Ë≥ºÁâ©Ëªä -->
    <div class="cart" onclick="toggleCart()">
        üõí Ë≥ºÁâ©Ëªä
        <span class="cart-count" id="cartCount">0</span>
    </div>

    <!-- Ë≥ºÁâ©ËªäË©≥ÊÉÖ -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-content">
            <h2>Ë≥ºÁâ©Ëªä</h2>
            <div id="cartItems"></div>
            <div style="margin-top: 20px; border-top: 2px solid #ddd; padding-top: 20px;">
                <h3>Á∏ΩË®à: <span id="totalAmount">NT$0</span></h3>
                <button class="btn btn-primary" style="width: 100%; margin-top: 10px;" onclick="checkout()">ÁµêÂ∏≥</button>
                <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;" onclick="toggleCart()">ÁπºÁ∫åÈªûÈ§ê</button>
            </div>
        </div>
    </div>

    <!-- ÂêåÊ≠•ÁãÄÊÖãÊèêÁ§∫ -->
    <div class="sync-status" id="syncStatus"></div>

    <script>
        // ËèúÂñÆË≥áÊñô
        const menuData = {
            fried: [
                { id: 'f1', name: 'È¶ôËÖ∏Á¢óÁ≤ø', price: 50, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f2', name: 'ËòøËîîÁ≥ïËæ£ÂçóÁìúÂè£Âë≥', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f3', name: 'ËòøËîîÁ≥ïËäãÈ†≠Âè£Âë≥', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f4', name: 'ÁÇ∏ÁêâÁêÉÁ≤øÂéüÂë≥', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f5', name: 'ÁÇ∏ÁêâÁêÉÁ≤øÂä†ÁáíËÇâ', price: 70, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f6', name: 'ÁÇ∏Ëî•Ê≤πÊ¢ù', price: 20, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f7', name: 'ÁÇ∏È≠öÊ¢ù‰∏Ä‰ªΩ3Ê¢ù', price: 30, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f8', name: 'ÁÇ∏Ëäã‰∏∏‰∏Ä‰ªΩ3È°Ü', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f9', name: 'ÁÇ∏ÈõûËÖøÊéí', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f10', name: 'ÁÇ∏Ëä±Êûù‰∏∏', price: 25, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f11', name: 'ÁÇ∏ËÇâÂúì‰∏ÄÈ°Ü', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f12', name: 'ÈäÄÁµ≤Âç∑+ÁÖâ‰π≥', price: 40, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f13', name: 'ÁÜ±Áãó', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f14', name: 'Â∞èÈõûÂ°ä', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f15', name: 'Â∞èËÇâË±Ü', price: 35, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f16', name: 'ÁÇ∏ÈõûËÖø', price: 40, category: 'ÁÇ∏Áâ©ÂçÄ' },
                { id: 'f17', name: 'Â§ßËÖ∏ÂåÖÂ∞èËÖ∏', price: 50, category: 'ÁÇ∏Áâ©ÂçÄ' }
            ],
            egg: [
                { id: 'e1', name: 'ÁáíËÇâËõãÈ§Ö', price: 45, category: 'ËõãÈ§ÖÂçÄ' },
                { id: 'e2', name: 'ÂéüÂë≥ËõãÈ§Ö', price: 25, category: 'ËõãÈ§ÖÂçÄ' },
                { id: 'e3', name: 'ÁéâÁ±≥ËõãÈ§Ö', price: 35, category: 'ËõãÈ§ÖÂçÄ' },
                { id: 'e4', name: 'ËÇâÈ¨ÜËõãÈ§Ö', price: 35, category: 'ËõãÈ§ÖÂçÄ' },
                { id: 'e5', name: 'ÁÅ´ËÖøËõãÈ§Ö', price: 35, category: 'ËõãÈ§ÖÂçÄ' },
                { id: 'e6', name: 'Ëµ∑Âè∏ËõãÈ§Ö', price: 35, category: 'ËõãÈ§ÖÂçÄ' },
                { id: 'e7', name: 'Ê≤πÊ¢ùËõãÈ§Ö', price: 40, category: 'ËõãÈ§ÖÂçÄ' }
            ],
            bun: [
                { id: 'b1', name: 'ÂéüÂë≥È•ÖÈ†≠ÂåÖ', price: 20, category: 'È•ÖÈ†≠ÂçÄ' },
                { id: 'b2', name: 'ÈªëÁ≥ñÈ•ÖÈ†≠ÂåÖ', price: 25, category: 'È•ÖÈ†≠ÂçÄ' },
                { id: 'b3', name: 'ÁúüËäãÈ†≠È•ÖÈ†≠', price: 15, category: 'È•ÖÈ†≠ÂçÄ' },
                { id: 'b4', name: 'ÈªëÁ≥ñËë°ËêÑ‰πæÈ•ÖÈ†≠', price: 15, category: 'È•ÖÈ†≠ÂçÄ' },
                { id: 'b5', name: 'Ëø∑‰Ω†Â∞èÈäÄÁµ≤Êç≤6È°Ü', price: 20, category: 'È•ÖÈ†≠ÂçÄ' },
                { id: 'b6', name: 'ÂÇ≥Áµ±ÁôΩÈ•ÖÈ†≠', price: 10, category: 'È•ÖÈ†≠ÂçÄ' },
                { id: 'b7', name: 'Ëî•Ëæ£È•ÖÈ†≠', price: 15, category: 'È•ÖÈ†≠ÂçÄ' },
                { id: 'b8', name: 'Á¥†ËèúÂåÖ', price: 20, category: 'È•ÖÈ†≠ÂçÄ' },
                { id: 'b9', name: 'ËÇâÂåÖ', price: 20, category: 'È•ÖÈ†≠ÂçÄ' }
            ],
            rice: [
                { id: 'r1', name: 'È¶ôËÖ∏È£ØÁ≥∞', price: 30, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r2', name: 'ËõãÂåÖÈ£ØÁ≥∞', price: 40, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r3', name: 'ÁáíËÇâÈ£ØÁ≥∞', price: 45, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r4', name: 'Á∏ΩÂåØÈ£ØÁ≥∞', price: 50, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r5', name: 'Â£ΩÂè∏', price: 60, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r6', name: 'ÁÇíÈ£Ø+Ëõã', price: 40, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r7', name: 'ÁÇíÈ£Ø+ÂèâÁáíÈõûËÖø', price: 65, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r8', name: 'ÁÇíÈ£Ø+ÁáíËÇâ', price: 50, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r9', name: 'È∫µÁ∑ö+Ëõã', price: 40, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r10', name: 'È∫µÁ∑ö+ÂèâÁáíÈõûËÖø', price: 65, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r11', name: 'È∫µÁ∑ö+ÁáíËÇâ', price: 50, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r12', name: 'ÊπØÂåÖÂ§ß‰ªΩ', price: 60, category: 'È£ØÁ≥∞ÂçÄ' },
                { id: 'r13', name: 'ÊπØÂåÖÂ∞è‰ªΩ', price: 35, category: 'È£ØÁ≥∞ÂçÄ' }
            ],
            drink: [
                { id: 'd1', name: 'ÂíñÂï°ÁâõÂ•∂ Â∞è', price: 15, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd2', name: 'ÂíñÂï°ÁâõÂ•∂ ‰∏≠', price: 20, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd3', name: 'ÂíñÂï°ÁâõÂ•∂ Â§ß', price: 25, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd4', name: 'Â•∂Ëå∂ Â∞è', price: 15, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd5', name: 'Â•∂Ëå∂ ‰∏≠', price: 20, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd6', name: 'Â•∂Ëå∂ Â§ß', price: 25, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd7', name: 'Ë±ÜÊºø Â∞è', price: 15, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd8', name: 'Ë±ÜÊºø ‰∏≠', price: 20, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd9', name: 'Ë±ÜÊºø Â§ß', price: 25, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd10', name: 'Ëñè‰ªÅÊºø Â∞è', price: 15, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd11', name: 'Ëñè‰ªÅÊºø ‰∏≠', price: 20, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd12', name: 'Ëñè‰ªÅÊºø Â§ß', price: 25, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd13', name: 'Á¥ÖËå∂ Â∞è', price: 15, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd14', name: 'Á¥ÖËå∂ ‰∏≠', price: 20, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd15', name: 'Á¥ÖËå∂ Â§ß', price: 25, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd16', name: 'ÈÆÆÂ•∂Ëå∂ Â∞è', price: 25, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd17', name: 'ÈÆÆÂ•∂Ëå∂ ‰∏≠', price: 35, category: 'È£≤ÊñôÂçÄ' },
                { id: 'd18', name: 'ÈÆÆÂ•∂Ëå∂ Â§ß', price: 45, category: 'È£≤ÊñôÂçÄ' }
            ],
            special: [
                { id: 's1', name: 'ÁÇ∏ÊãâËÖøËÖøËªä', price: 65, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's2', name: 'ÁáíËÇâËµ∑Âè∏ËõãÂêêÂè∏', price: 55, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's3', name: 'ÁáíËÇâËµ∑Âè∏ËõãÊº¢Â†°', price: 55, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's4', name: 'ÁáíËÇâËõãÂêêÂè∏', price: 45, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's5', name: 'ÁáíËÇâËõãÊº¢Â†°', price: 45, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's6', name: 'ÁáíËÇâÂààÂåÖ', price: 50, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's7', name: 'ÁÇ∏Âï¶Èõû‰∫åÊòéÊ≤ª', price: 30, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's8', name: 'Â∑ßÂÖãÂäõÂúüÂè∏', price: 15, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's9', name: 'Â•∂ÈÖ•ÂúüÂè∏', price: 20, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' },
                { id: 's10', name: 'Ê≥ïÂúãÂúüÂè∏', price: 30, category: 'Êº¢Â†°ÂúüÂè∏ÂçÄ' }
            ]
        };

        // Ë≥ºÁâ©ËªäË≥áÊñô
        let cart = [];
        let orders = [];
        let dailySales = {
            date: new Date().toLocaleDateString(),
            revenue: 0,
            orderCount: 0,
            items: {},
            categories: {},
            customers: {}
        };
        let regularCustomers = [];

        // ÂàùÂßãÂåñ
        window.onload = function() {
            loadLocalData();
            displayMenu('all');
            updateTime();
            setInterval(updateTime, 1000);
            updateCartDisplay();
            updateStats();
        };

        // Êõ¥Êñ∞ÊôÇÈñì
        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleString('zh-TW');
        }

        // È°ØÁ§∫Ê®ôÁ±§È†Å
        function showTab(tabName) {
            // Èö±ËóèÊâÄÊúâÂÖßÂÆπ
            document.querySelectorAll('.content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // ÁßªÈô§ÊâÄÊúâ active È°ûÂà•
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // È°ØÁ§∫ÈÅ∏‰∏≠ÁöÑÊ®ôÁ±§È†Å
            document.getElementById(tabName + 'Tab').style.display = 'block';
            event.target.classList.add('active');
            
            if (tabName === 'stats') {
                updateStats();
            }
        }

        // È°ØÁ§∫È°ûÂà•
        function showCategory(category) {
            // Êõ¥Êñ∞ÊåâÈàïÁãÄÊÖã
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayMenu(category);
        }

        // È°ØÁ§∫ËèúÂñÆ
        function displayMenu(category) {
            const menuItems = document.getElementById('menuItems');
            menuItems.innerHTML = '';
            
            let items = [];
            if (category === 'all') {
                Object.values(menuData).forEach(categoryItems => {
                    items = items.concat(categoryItems);
                });
            } else {
                items = menuData[category] || [];
            }
            
            items.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'menu-item fade-in';
                itemDiv.innerHTML = `
                    <h3>${item.name}</h3>
                    <div class="price">NT$${item.price}</div>
                    <button class="add-btn" onclick="addToCart('${item.id}', '${item.name}', ${item.price}, '${item.category}')">
                        Âä†ÂÖ•Ë≥ºÁâ©Ëªä
                    </button>
                `;
                menuItems.appendChild(itemDiv);
            });
        }

        // Âä†ÂÖ•Ë≥ºÁâ©Ëªä
        function addToCart(id, name, price, category) {
            const existingItem = cart.find(item => item.id === id);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: id,
                    name: name,
                    price: price,
                    category: category,
                    quantity: 1
                });
            }
            
            updateCartDisplay();
            showNotification('Â∑≤Âä†ÂÖ•Ë≥ºÁâ©ËªäÔºÅ');
        }

        // Êõ¥Êñ∞Ë≥ºÁâ©ËªäÈ°ØÁ§∫
        function updateCartDisplay() {
            const cartCount = document.getElementById('cartCount');
            const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalQuantity;
            
            const cartItems = document.getElementById('cartItems');
            const totalAmount = document.getElementById('totalAmount');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="text-align: center; color: #999;">Ë≥ºÁâ©ËªäÊòØÁ©∫ÁöÑ</p>';
                totalAmount.textContent = 'NT$0';
                return;
            }
            
            cartItems.innerHTML = '';
            let total = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'cart-item';
                itemDiv.innerHTML = `
                    <div>
                        <strong>${item.name}</strong>
                        <div style="color: #666; font-size: 14px;">NT$${item.price} √ó ${item.quantity} = NT$${itemTotal}</div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="updateQuantity('${item.id}', -1)">-</button>
                        <span style="margin: 0 10px;">${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateQuantity('${item.id}', 1)">+</button>
                    </div>
                `;
                cartItems.appendChild(itemDiv);
            });
            
            totalAmount.textContent = `NT$${total}`;
        }

        // Êõ¥Êñ∞Êï∏Èáè
        function updateQuantity(id, change) {
            const item = cart.find(item => item.id === id);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    cart = cart.filter(i => i.id !== id);
                }
                updateCartDisplay();
            }
        }

        // ÂàáÊèõË≥ºÁâ©Ëªä
        function toggleCart() {
            const modal = document.getElementById('cartModal');
            modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
        }

        // ÁµêÂ∏≥
        function checkout() {
            if (cart.length === 0) {
                alert('Ë≥ºÁâ©ËªäÊòØÁ©∫ÁöÑÔºÅ');
                return;
            }
            
            const order = {
                id: 'ORD-' + Date.now(),
                timestamp: new Date().toISOString(),
                items: [...cart],
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
            };
            
            // ÂÑ≤Â≠òË®ÇÂñÆ
            orders.push(order);
            
            // Êõ¥Êñ∞ÊØèÊó•Èä∑ÂîÆÊï∏Êìö
            updateDailySales(order);
            
            // ÂÑ≤Â≠òÂà∞Êú¨Âú∞
            saveLocalData();
            
            // Ê∏ÖÁ©∫Ë≥ºÁâ©Ëªä
            cart = [];
            updateCartDisplay();
            toggleCart();
            
            showNotification('Ë®ÇÂñÆÂÆåÊàêÔºÅ');
            updateStats();
        }

        // Êõ¥Êñ∞ÊØèÊó•Èä∑ÂîÆÊï∏Êìö
        function updateDailySales(order) {
            dailySales.revenue += order.total;
            dailySales.orderCount++;
            
            order.items.forEach(item => {
                // Êõ¥Êñ∞ÂïÜÂìÅÈä∑ÂîÆÊï∏Êìö
                if (!dailySales.items[item.id]) {
                    dailySales.items[item.id] = {
                        name: item.name,
                        quantity: 0,
                        revenue: 0
                    };
                }
                dailySales.items[item.id].quantity += item.quantity;
                dailySales.items[item.id].revenue += item.price * item.quantity;
                
                // Êõ¥Êñ∞È°ûÂà•Èä∑ÂîÆÊï∏Êìö
                if (!dailySales.categories[item.category]) {
                    dailySales.categories[item.category] = {
                        quantity: 0,
                        revenue: 0
                    };
                }
                dailySales.categories[item.category].quantity += item.quantity;
                dailySales.categories[item.category].revenue += item.price * item.quantity;
            });
        }

        // Êõ¥Êñ∞Áµ±Ë®à
        function updateStats() {
            // ‰ªäÊó•ÁáüÊ•≠È°ç
            document.getElementById('todayRevenue').textContent = `NT$${dailySales.revenue}`;
            
            // Ë®ÇÂñÆÊï∏Èáè
            document.getElementById('orderCount').textContent = dailySales.orderCount;
            
            // Âπ≥ÂùáË®ÇÂñÆÈáëÈ°ç
            const avgOrder = dailySales.orderCount > 0 ? Math.round(dailySales.revenue / dailySales.orderCount) : 0;
            document.getElementById('avgOrder').textContent = `NT$${avgOrder}`;
            
            // ÁÜ±Èä∑ÂïÜÂìÅ
            const topItem = Object.entries(dailySales.items)
                .sort((a, b) => b[1].quantity - a[1].quantity)[0];
            document.getElementById('topItem').textContent = topItem ? topItem[1].name : '-';
            
            // È°ûÂà•Áµ±Ë®à
            const categoryStats = document.getElementById('categoryStats');
            categoryStats.innerHTML = '';
            
            Object.entries(dailySales.categories).forEach(([category, data]) => {
                const percentage = dailySales.revenue > 0 ? 
                    ((data.revenue / dailySales.revenue) * 100).toFixed(1) : 0;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${category}</td>
                    <td>${data.quantity}</td>
                    <td>NT$${data.revenue}</td>
                    <td>${percentage}%</td>
                `;
                categoryStats.appendChild(row);
            });
            
            // ÁÜ±Èä∑ÂïÜÂìÅÊéíË°å
            const topItems = document.getElementById('topItems');
            topItems.innerHTML = '';
            
            Object.entries(dailySales.items)
                .sort((a, b) => b[1].quantity - a[1].quantity)
                .slice(0, 10)
                .forEach(([id, data], index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${data.name}</td>
                        <td>${data.quantity}</td>
                        <td>NT$${data.revenue}</td>
                    `;
                    topItems.appendChild(row);
                });
        }

        // È°ØÁ§∫ÈÄöÁü•
        function showNotification(message) {
            const status = document.getElementById('syncStatus');
            status.textContent = message;
            status.classList.add('show');
            
            setTimeout(() => {
                status.classList.remove('show');
            }, 3000);
        }

        // ÂÑ≤Â≠òÂà∞Êú¨Âú∞
        function saveLocalData() {
            localStorage.setItem('orders', JSON.stringify(orders));
            localStorage.setItem('dailySales', JSON.stringify(dailySales));
        }

        // ËºâÂÖ•Êú¨Âú∞Ë≥áÊñô
        function loadLocalData() {
            const savedOrders = localStorage.getItem('orders');
            const savedDailySales = localStorage.getItem('dailySales');
            
            if (savedOrders) {
                orders = JSON.parse(savedOrders);
            }
            
            if (savedDailySales) {
                const saved = JSON.parse(savedDailySales);
                // Ê™¢Êü•ÊòØÂê¶ÊòØ‰ªäÂ§©ÁöÑË≥áÊñô
                if (saved.date === new Date().toLocaleDateString()) {
                    dailySales = saved;
                } else {
                    // Â¶ÇÊûú‰∏çÊòØ‰ªäÂ§©ÔºåÈáçÁΩÆË≥áÊñô
                    dailySales = {
                        date: new Date().toLocaleDateString(),
                        revenue: 0,
                        orderCount: 0,
                        items: {},
                        categories: {}
                    };
                }
            }
        }

        // ÁîüÊàêÊó•Â†±Ë°®
        function generateDailyReport() {
            const reportContent = document.getElementById('reportContent');
            reportContent.innerHTML = `
                <h3>Êó•Â†±Ë°® - ${dailySales.date}</h3>
                <p>Á∏ΩÁáüÊ•≠È°ç: NT$${dailySales.revenue}</p>
                <p>Ë®ÇÂñÆÊï∏Èáè: ${dailySales.orderCount}</p>
                <p>Âπ≥ÂùáË®ÇÂñÆÈáëÈ°ç: NT$${dailySales.orderCount > 0 ? Math.round(dailySales.revenue / dailySales.orderCount) : 0}</p>
            `;
        }

        // ÂåØÂá∫CSV
        function exportToCSV() {
            let csv = 'ÂïÜÂìÅÂêçÁ®±,Êï∏Èáè,ÁáüÊ•≠È°ç\n';
            
            Object.entries(dailySales.items).forEach(([id, data]) => {
                csv += `${data.name},${data.quantity},${data.revenue}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `Èä∑ÂîÆÂ†±Ë°®_${dailySales.date.replace(/\//g, '-')}.csv`;
            link.click();
        }

        // ÂêåÊ≠•Âà∞ GitHub
        async function syncToGitHub() {
            const token = localStorage.getItem('githubToken');
            const repo = localStorage.getItem('githubRepo');
            
            if (!token || !repo) {
                alert('Ë´ãÂÖàÂú®Ë®≠ÂÆö‰∏≠ÈÖçÁΩÆ GitHubÔºÅ');
                showTab('settings');
                return;
            }
            
            try {
                const [owner, repoName] = repo.split('/');
                const date = new Date().toISOString().split('T')[0];
                const path = `sales/${date}.json`;
                const content = btoa(JSON.stringify({
                    date: dailySales.date,
                    revenue: dailySales.revenue,
                    orderCount: dailySales.orderCount,
                    items: dailySales.items,
                    categories: dailySales.categories,
                    orders: orders.filter(o => o.timestamp.startsWith(date))
                }, null, 2));
                
                // ÂÖàÊ™¢Êü•Ê™îÊ°àÊòØÂê¶Â≠òÂú®
                let sha;
                try {
                    const checkResponse = await fetch(
                        `https://api.github.com/repos/${owner}/${repoName}/contents/${path}`,
                        {
                            headers: {
                                'Authorization': `token ${token}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        }
                    );
                    
                    if (checkResponse.ok) {
                        const existingFile = await checkResponse.json();
                        sha = existingFile.sha;
                    }
                } catch (e) {
                    // Ê™îÊ°à‰∏çÂ≠òÂú®ÔºåÈÄôÊòØÊ≠£Â∏∏ÁöÑ
                }
                
                // ‰∏äÂÇ≥ÊàñÊõ¥Êñ∞Ê™îÊ°à
                const response = await fetch(
                    `https://api.github.com/repos/${owner}/${repoName}/contents/${path}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: `Update sales data for ${date}`,
                            content: content,
                            sha: sha // Â¶ÇÊûúÊ™îÊ°àÂ≠òÂú®ÔºåÈúÄË¶ÅÊèê‰æõ sha
                        })
                    }
                );
                
                if (response.ok) {
                    showNotification('Â∑≤ÊàêÂäüÂêåÊ≠•Âà∞ GitHubÔºÅ');
                } else {
                    const error = await response.json();
                    throw new Error(error.message || 'ÂêåÊ≠•Â§±Êïó');
                }
            } catch (error) {
                alert('ÂêåÊ≠•Â§±Êïó: ' + error.message);
            }
        }

        // ÂÑ≤Â≠ò GitHub Ë®≠ÂÆö
        function saveGitHubSettings() {
            const token = document.getElementById('githubToken').value;
            const repo = document.getElementById('githubRepo').value;
            
            if (!token || !repo) {
                alert('Ë´ãÂ°´ÂØ´ÊâÄÊúâÊ¨Ñ‰ΩçÔºÅ');
                return;
            }
            
            localStorage.setItem('githubToken', token);
            localStorage.setItem('githubRepo', repo);
            
            showNotification('GitHub Ë®≠ÂÆöÂ∑≤ÂÑ≤Â≠òÔºÅ');
        }

        // ‰∏ãËºâÂÇô‰ªΩ
        function downloadBackup() {
            const backup = {
                orders: orders,
                dailySales: dailySales,
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `Êó©È§êÂ∫óÂÇô‰ªΩ_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
        }

        // Ê∏ÖÈô§Êú¨Âú∞Ë≥áÊñô
        function clearLocalData() {
            if (confirm('Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÊú¨Âú∞Ë≥áÊñôÂóéÔºüÈÄôÂÄãÊìç‰ΩúÁÑ°Ê≥ïÂæ©ÂéüÔºÅ')) {
                localStorage.clear();
                orders = [];
                dailySales = {
                    date: new Date().toLocaleDateString(),
                    revenue: 0,
                    orderCount: 0,
                    items: {},
                    categories: {}
                };
                updateStats();
                showNotification('Â∑≤Ê∏ÖÈô§ÊâÄÊúâÊú¨Âú∞Ë≥áÊñô');
            }
        }

        // ÈóúÈñâË≥ºÁâ©ËªäÁï∂ÈªûÊìäÂ§ñÈÉ®
        window.onclick = function(event) {
            const modal = document.getElementById('cartModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html>